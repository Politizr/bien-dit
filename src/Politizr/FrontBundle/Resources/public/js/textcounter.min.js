/*!
* jQuery Text Counter Plugin v0.3.5
* https://github.com/ractoon/jQuery-Text-Counter
*
* Copyright 2014 ractoon
* Released under the MIT license
*/
!function(t){t.textcounter=function(o,n){var e=this;e.$el=t(o),e.el=o,e.$el.data("textcounter",e),e.init=function(){e.options=t.extend({},t.textcounter.defaultOptions,n);var o=e.options.countDown?e.options.countDownText:e.options.counterText,r=e.options.countDown?e.options.max:0;e.$el.after("<"+e.options.countContainerElement+' class="'+e.options.countContainerClass+'">'+o+'<span class="'+e.options.textCountClass+'">'+r+"</span></"+e.options.countContainerElement+">"),e.$el.bind("keyup.textcounter click.textcounter blur.textcounter focus.textcounter change.textcounter paste.textcounter",e.checkLimits).trigger("click.textcounter"),e.options.init(e.el)},e.checkLimits=function(o){var n=e.$el,r=(n.nextAll("."+e.options.countContainerClass),n.val()),i=0,s=0,a=void 0===o.originalEvent?!1:!0;if(!t.isEmptyObject(r))if("word"==e.options.type)i=r.trim().replace(/\s+/gi," ").split(" ").length;else if(i=e.options.countSpaces?r.replace(/[^\S\n|\r|\r\n]/g," ").length:r.replace(/\s/g,"").length,e.options.countExtendedCharacters){var c=r.match(/[^\x00-\xff]/gi);i=null==c?r.length:r.length+c.length}if("auto"==e.options.max){var u=e.$el.attr("maxlength");"undefined"!=typeof u&&u!==!1?e.options.max=u:e.$el.nextAll("."+e.options.countContainerClass).text("error: [maxlength] attribute not set")}if(s=e.options.countDown?e.options.max-i:i,e.setCount(s),e.options.min>0&&a&&(i<e.options.min?e.setErrors("min"):i>=e.options.min&&(e.options.mincount(e.el),e.clearErrors("min"))),-1!==e.options.max)if(i>=e.options.max&&0!=e.options.max)if(e.options.maxcount(e.el),e.options.stopInputAtMaximum){var l="";if("word"==e.options.type)for(var p=r.split(/[^\S\n]/g),x=0;x<p.length&&!(x>=e.options.max-1);)void 0!==p[x]&&(l+=p[x]+" ",x++);else if(e.options.countSpaces)l=r.substring(0,e.options.max);else for(var m=r.split(""),C=m.length,f=0,x=0;f<e.options.max&&C>x;)" "!==m[x]&&f++,l+=m[x++];n.val(l.trim()),s=e.options.countDown?0:e.options.max,e.setCount(s)}else e.setErrors("max");else e.clearErrors("max")},e.setCount=function(t){var o=e.$el,n=o.nextAll("."+e.options.countContainerClass);n.children("."+e.options.textCountClass).text(t)},e.setErrors=function(t){var o=e.$el,n=o.nextAll("."+e.options.countContainerClass);if(o.addClass(e.options.inputErrorClass),n.addClass(e.options.counterErrorClass),e.options.displayErrorText){switch(t){case"min":errorText=e.options.minimumErrorText;break;case"max":errorText=e.options.maximumErrorText}n.children(".error-text-"+t).length||n.append("<"+e.options.errorTextElement+' class="error-text error-text-'+t+'">'+errorText+"</"+e.options.errorTextElement+">")}},e.clearErrors=function(t){var o=e.$el,n=o.nextAll("."+e.options.countContainerClass);n.children(".error-text-"+t).remove(),0==n.children(".error-text").length&&(o.removeClass(e.options.inputErrorClass),n.removeClass(e.options.counterErrorClass))},e.init()},t.textcounter.defaultOptions={type:"character",min:0,max:200,countContainerElement:"div",countContainerClass:"text-count-wrapper",textCountClass:"text-count",inputErrorClass:"error",counterErrorClass:"error",counterText:"Total Count: ",errorTextElement:"div",minimumErrorText:"Minimum not met",maximumErrorText:"Maximum exceeded",displayErrorText:!0,stopInputAtMaximum:!0,countSpaces:!1,countDown:!1,countDownText:"Remaining: ",countExtendedCharacters:!1,maxcount:function(t){},mincount:function(t){},init:function(t){}},t.fn.textcounter=function(o){return this.each(function(){new t.textcounter(this,o)})}}(jQuery);