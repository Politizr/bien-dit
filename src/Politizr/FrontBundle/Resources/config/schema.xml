<?xml version="1.0" encoding="UTF-8"?>
<database name="default" namespace="Politizr\Model" defaultIdMethod="native">

    <table name="p_tag">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="archivable" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_t_tag_type_id" type="integer" required="true" />
        <column name="p_user_id" type="integer" required="false" />
        
        <column name="title" type="varchar" size="150" />

        <column name="online" type="boolean" />

        <foreign-key foreignTable="p_t_tag_type" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_t_tag_type_id" foreign="id" />
        </foreign-key>        
        <foreign-key foreignTable="p_user" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>        
    </table>

    <table name="p_t_tag_type">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        
        <column name="title" type="varchar" size="150" />

        <column name="description" type="longvarchar" />
    </table>





    <table name="p_r_badge">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="archivable" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_r_badge_type_id" type="integer" required="true" />
        <column name="p_r_badge_metal_id" type="integer" required="true" />
        
        <column name="title" type="varchar" size="150" />
        <column name="description" type="longvarchar" />

        <column name="online" type="boolean" />

        <foreign-key foreignTable="p_r_badge_type" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_r_badge_type_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_r_badge_metal" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_r_badge_metal_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_r_badge_type">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sortable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        
        <column name="title" type="varchar" size="150" />
        <column name="description" type="longvarchar" />
    </table>

    <table name="p_r_badge_metal">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sortable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        
        <column name="title" type="varchar" size="150" />
        <column name="description" type="longvarchar" />
    </table>





    <table name="p_r_action">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        
        <column name="title" type="varchar" size="150" />
        <column name="description" type="longvarchar" />

        <column name="p_object_name" type="varchar" size="150" />
        <column name="p_object_id" type="integer" />

        <column name="score_evolution" type="integer" />

        <column name="online" type="boolean" />
    </table>





    <table name="p_order">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="archivable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" />
        <column name="p_o_order_state_id" type="integer" />
        <column name="p_o_payment_state_id" type="integer" />
        <column name="p_o_payment_type_id" type="integer" />
        <column name="p_o_subscription_id" type="integer" />

        <column name="subscription_title" type="varchar" size="150" />
        <column name="subscription_description" type="longvarchar" />
        <column name="subscription_begin_at" type="date" />
        <column name="subscription_end_at" type="date" />
        <column name="information" type="longvarchar" />

        <column name="price" type="decimal" size="10" scale="2" />
        <column name="promotion" type="decimal" size="10" scale="2" />
        <column name="total" type="decimal" size="10" scale="2" />

        <column name="gender" type="enum" valueSet="Madame, Monsieur" />
        <column name="name" type="varchar" size="150" />
        <column name="firstname" type="varchar" size="150" />   
        <column name="phone" type="varchar" size="30" />
        <column name="email" type="varchar" size="255" /> 

        <column name="invoice_ref" type="varchar" size="250" />
        <column name="invoice_at" type="timestamp" />
        <column name="invoice_filename" type="varchar" size="250" />

        <column name="supporting_document" type="varchar" size="250" />
        <column name="elective_mandates" type="longvarchar" />

        <foreign-key foreignTable="p_user" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_o_order_state" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_o_order_state_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_o_payment_state" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_o_payment_state_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_o_payment_type" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_o_payment_type_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_o_subscription" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_o_subscription_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_o_order_state">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" />
        <column name="title" type="varchar" size="150" />
        <column name="description" type="longvarchar" />
    </table>

    <table name="p_o_payment_state">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" />
        <column name="title" type="varchar" size="150" />
        <column name="description" type="longvarchar" />
    </table>

    <table name="p_o_payment_type">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sortable" />

        <column name="id" type="integer" required="true" primaryKey="true" />
        <column name="title" type="varchar" size="150" />
        <column name="description" type="longvarchar" />

        <column name="online" type="boolean" />
    </table>

    <table name="p_o_subscription">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        <behavior name="sortable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        
        <column name="title" type="varchar" size="150" />
        <column name="description" type="longvarchar" />

        <column name="price" type="decimal" size="10" scale="2" />

        <column name="online" type="boolean" />
    </table>
    
    <table name="p_o_email">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_order_id" required="true" type="integer" />
        <column name="p_o_order_state_id" type="integer" />
        <column name="p_o_payment_state_id" type="integer" />
        <column name="p_o_payment_type_id" type="integer" />
        <column name="p_o_subscription_id" type="integer" />

        <column name="send" type="varchar" size="150" />

        <column name="subject" type="varchar" size="250" />
        <column name="html_body" type="longvarchar" />
        <column name="txt_body" type="longvarchar" />

        <foreign-key foreignTable="p_order" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_order_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_o_order_state" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_o_order_state_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_o_payment_state" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_o_payment_state_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_o_payment_type" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_o_payment_type_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_o_subscription" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_o_subscription_id" foreign="id" />
        </foreign-key>
    </table>




    <table name="p_qualification">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        <behavior name="sortable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />

        <column name="title" type="varchar" size="250" />
        <column name="description" type="longvarchar" />

        <column name="online" type="boolean" />
    </table>

    <table name="p_q_type">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        <behavior name="sortable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />

        <column name="title" type="varchar" size="250" />
        <column name="description" type="longvarchar" />

        <column name="online" type="boolean" />
    </table>

    <table name="p_q_mandate">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        <behavior name="sortable" >
            <parameter name="use_scope" value="true" />
            <parameter name="scope_column" value="p_q_type_id" />
        </behavior>

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />

        <column name="p_q_type_id" type="integer" required="true" />

        <column name="title" type="varchar" size="250" />

        <column name="online" type="boolean" />

        <foreign-key foreignTable="p_q_type" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_q_type_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_q_organization">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        <behavior name="sortable" >
            <parameter name="use_scope" value="true" />
            <parameter name="scope_column" value="p_q_type_id" />
        </behavior>
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />

        <column name="title" type="varchar" size="250" />
        <column name="initials" type="varchar" size="50" />

        <column name="file_name" type="varchar" size="150" />

        <column name="description" type="longvarchar" />

        <column name="online" type="boolean" />

        <foreign-key foreignTable="p_q_type" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_q_type_id" foreign="id" />
        </foreign-key>
    </table>




    <table name="p_notification">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />

        <column name="title" type="varchar" size="250" />
        <column name="description" type="longvarchar" />
        
        <column name="online" type="boolean" />
    </table>


    <table name="p_user">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable"/>
        <behavior name="archivable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />

        <column name="provider" type="varchar" size="255" />
        <column name="provider_id" type="varchar" size="255" />
        <column name="nickname" type="varchar" size="255" />
        <column name="realname" type="varchar" size="255" />

        <column name="username" type="varchar" size="255" />
        <column name="username_canonical" type="varchar" size="255" />
        <unique>
            <unique-column name="username_canonical" />
        </unique>

        <column name="email" type="varchar" size="255" />
        <column name="email_canonical" type="varchar" size="255" />
        <unique>
            <unique-column name="email_canonical" />
        </unique>

        <column name="enabled" type="boolean" defaultValue="false" />
        <column name="salt" type="varchar" size="255" required="true" />
        <column name="password" type="varchar" size="255" required="true" />
        <column name="last_login" type="timestamp" />
        <column name="locked" type="boolean" defaultValue="false" />
        <column name="expired" type="boolean" defaultValue="false" />
        <column name="expires_at" type="timestamp" />
        <column name="confirmation_token" type="varchar" size="255" />
        <column name="password_requested_at" type="timestamp" />
        <column name="credentials_expired" type="boolean" defaultValue="false" />
        <column name="credentials_expire_at" type="timestamp" />
        <column name="roles" type="array" />
        
        <column name="p_u_status_id" type="integer" required="true" />

        <column name="file_name" type="varchar" size="150" />
        <column name="back_file_name" type="varchar" size="150" />
        <column name="gender" type="enum" valueSet="Madame, Monsieur" />
        <column name="firstname" type="varchar" size="150" />
        <column name="name" type="varchar" size="150" />
        <column name="birthday" type="date" />

        <column name="subtitle" type="varchar" size="500" />
        <column name="biography" type="longvarchar" />

        <column name="website" type="varchar" size="150" />
        <column name="twitter" type="varchar" size="150" />
        <column name="facebook" type="varchar" size="150" />
        <column name="phone" type="varchar" size="30" />

        <column name="newsletter" type="boolean" />
        
        <column name="last_connect" type="timestamp" />
        <column name="nb_connected_days" type="integer" defaultValue="0" />

        <column name="nb_views" type="integer" />

        <column name="qualified" type="boolean" />
        <column name="validated" type="boolean" defaultValue="false" />

        <column name="online" type="boolean" />

        <foreign-key foreignTable="p_u_status" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_u_status_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_u_status">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" />
        <column name="title" type="varchar" size="150" />
    </table>    



    <table name="p_u_follow_u">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="equal_nest">
            <parameter name="parent_table" value="p_user" />
            <parameter name="reference_column_1" value="p_user_id" />
            <parameter name="reference_column_2" value="p_user_follower_id" />
        </behavior>
    </table>    

    <table name="p_u_follow_d_d" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_d_debate_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" phpName="PuFollowDdPUser" refPhpName="PuFollowDdPUser" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_d_debate" phpName="PuFollowDdPDDebate" refPhpName="PuFollowDdPDDebate" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_d_debate_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_u_badges" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_r_badge_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_r_badge" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_r_badge_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_u_reputation" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_r_action_id" type="integer" required="true" />

        <column name="p_object_name" type="varchar" size="150" />
        <column name="p_object_id" type="integer" />

        <foreign-key foreignTable="p_user" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_r_action" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_r_action_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_u_tagged_t" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_tag_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" phpName="PuTaggedTPUser" refPhpName="PuTaggedTPUser" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_tag" phpName="PuTaggedTPTag" refPhpName="PuTaggedTPTag" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_tag_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_u_follow_t" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_tag_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" phpName="PuFollowTPUser" refPhpName="PuFollowTPUser" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_tag" phpName="PuFollowTPTag" refPhpName="PuFollowTPTag" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_tag_id" foreign="id" />
        </foreign-key>
    </table>


    <table name="p_u_role_q" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_qualification_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_qualification" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_qualification_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_u_mandate">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="archivable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />

        <column name="p_user_id" type="integer" required="true" />
        <column name="p_q_type_id" type="integer" required="true" />
        <column name="p_q_mandate_id" type="integer" required="true" />
        <column name="p_q_organization_id" type="integer" required="false" />

        <column name="description" type="longvarchar" />

        <column name="begin_at" type="timestamp" />
        <column name="end_at" type="timestamp" />

        <foreign-key foreignTable="p_user" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>        
        <foreign-key foreignTable="p_q_type" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_q_type_id" foreign="id" />
        </foreign-key>        
        <foreign-key foreignTable="p_q_mandate" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_q_mandate_id" foreign="id" />
        </foreign-key>        
        <foreign-key foreignTable="p_q_organization" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_q_organization_id" foreign="id" />
        </foreign-key>        
    </table>

    <table name="p_u_affinity_q_o" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_q_organization_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" phpName="PUAffinityQOPUser" refPhpName="PUAffinityQOPUser" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_q_organization" phpName="PUAffinityQOPQOrganization" refPhpName="PUAffinityQOPQOrganization" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_q_organization_id" foreign="id" />
        </foreign-key>

    </table>

    <table name="p_u_current_q_o" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_q_organization_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" phpName="PUCurrentQOPUser" refPhpName="PUCurrentQOPUser" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_q_organization" phpName="PUCurrentQOPQOrganization" refPhpName="PUCurrentQOPQOrganization" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_q_organization_id" foreign="id" />
        </foreign-key>

    </table>



    <table name="p_u_notifications" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_notification_id" type="integer" required="true" />

        <column name="p_object_name" type="varchar" size="150" />
        <column name="p_object_id" type="integer" />
        <column name="p_author_user_id" type="integer" />

        <column name="checked" type="boolean" />
        <column name="checked_at" type="timestamp" />

        <foreign-key foreignTable="p_user" phpName="PUNotificationsPUser" refPhpName="PUNotificationsPUser" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>

        <foreign-key foreignTable="p_notification" phpName="PUNotificationsPNotification" refPhpName="PUNotificationsPNotification" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_notification_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_u_subscribe_email" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_notification_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" phpName="PUSubscribeEmailPUser" refPhpName="PUSubscribeEmailPUser" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>

        <foreign-key foreignTable="p_notification" phpName="PUSubscribeEmailPNotification" refPhpName="PUSubscribeEmailPNotification" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_notification_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_u_subscribe_screen" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="true" />
        <column name="p_notification_id" type="integer" required="true" />

        <foreign-key foreignTable="p_user" phpName="PUSubscribeScreenPUser" refPhpName="PUSubscribeScreenPUser" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>

        <foreign-key foreignTable="p_notification" phpName="PUSubscribeScreenPNotification" refPhpName="PUSubscribeScreenPNotification" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_notification_id" foreign="id" />
        </foreign-key>
    </table>





    <table name="p_document">
        <behavior name="query_cache" />
        <behavior name="archivable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" required="false" />

        <column name="title" type="varchar" size="100" />

        <column name="file_name" type="varchar" size="150" />

        <column name="summary" type="longvarchar" />
        <column name="description" type="longvarchar" />

        <column name="note_pos" type="integer" defaultValue="0" />
        <column name="note_neg" type="integer" defaultValue="0" />

        <column name="nb_views" type="integer" />

        <column name="published" type="boolean" />
        <column name="published_at" type="timestamp" />
        <column name="published_by" type="varchar" size="300" />

        <column name="favorite" type="boolean" />
        <column name="online" type="boolean" />

        <foreign-key foreignTable="p_user" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_d_debate">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        <behavior name="concrete_inheritance">
            <parameter name="extends" value="p_document" />
        </behavior>

    </table>

    <table name="p_d_reaction">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="sluggable">
            <parameter name="slug_pattern" value="{title}" />
        </behavior>
        <behavior name="nested_set">
            <parameter name="use_scope" value="true" />
            <parameter name="scope_column" value="p_d_debate_id" />
        </behavior>
        <behavior name="concrete_inheritance">
            <parameter name="extends" value="p_document" />
        </behavior>

        <column name="p_d_debate_id" type="integer" required="true" />
        <column name="parent_reaction_id" type="integer" required="false" />

        <foreign-key foreignTable="p_d_debate" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_d_debate_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_d_comment">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="archivable" />
        
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_user_id" type="integer" />
        <column name="p_document_id" type="integer" required="true" />

        <column name="description" type="longvarchar" />
        <column name="paragraph_no" type="integer" />

        <column name="note_pos" type="integer" defaultValue="0" />
        <column name="note_neg" type="integer" defaultValue="0" />

        <column name="published_at" type="timestamp" />
        <column name="published_by" type="varchar" size="300" />

        <column name="online" type="boolean" />

        <foreign-key foreignTable="p_user" onDelete="SETNULL" onUpdate="CASCADE">
            <reference local="p_user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_document" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_document_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="p_d_d_tagged_t" isCrossRef="true">
        <behavior name="timestampable" />
        <behavior name="query_cache" />
        <behavior name="archivable" />

        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="p_d_debate_id" type="integer" required="true" />
        <column name="p_tag_id" type="integer" required="true" />

        <foreign-key foreignTable="p_d_debate" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_d_debate_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="p_tag" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="p_tag_id" foreign="id" />
        </foreign-key>
    </table>


</database>