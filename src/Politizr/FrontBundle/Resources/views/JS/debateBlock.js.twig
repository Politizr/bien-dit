<script>
    // **************************** //
    //      Initialisation
    // **************************** //
    $(document).ready(function () {
        $('.authorInfos').hide();
        $('.debateInfos').hide();
        $('.reactionInfos').hide();
    });

    // **************************** //
    //      Fonctions simples
    // **************************** //

    // Plus d'infos > auteur
    $("body").on("click", ".authorMoreInfo", function() {
        if ($(this).siblings('.authorInfos').is(':visible')) {
            $(this).siblings('.authorInfos').hide();
        } else {
            $(this).siblings('.authorInfos').show();
        }
    });

    // Plus d'infos réaction > infos débat
    $("body").on("click", ".debateMoreInfo", function() {
        if ( $(this).siblings('.debateInfos').is(':visible')) {
            $(this).siblings('.debateInfos').hide();
        } else {
            $(this).siblings('.debateInfos').show();
        }
    });

    // Plus d'infos réaction > infos réaction
    $("body").on("click", ".reactionMoreInfo", function() {
        if ( $(this).siblings('.reactionInfos').is(':visible')) {
            $(this).siblings('.reactionInfos').hide();
        } else {
            $(this).siblings('.reactionInfos').show();
        }
    });


    // **************************** //
    //      AJAX
    // **************************** //

    // Suivi débat
    $("body").on("click", ".followPDebate", function(e) {
        console.log('*** click .followPDebate');
        // e.preventDefault();

        $.ajax({
            type: 'POST',
            url: "{{ path('FollowPDDebate') }}",
            data: { 'objectId': $(this).attr('objectId'), 'type': $(this).attr('type') },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:Navigation:ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('#ajaxLoader').hide();
                    $('#boxErrorLogin').html(data['error']);
                    $('#boxErrorLogin').show();
                } else {
                    // TODO MAJ libellé / classe
                }
            }
        });

    });

    // Suivi débat
    $("body").on("click", ".unfollowPDebate", function(e) {
        console.log('*** click .unfollowPDebate');
        // e.preventDefault();

        $.ajax({
            type: 'POST',
            url: "{{ path('UnfollowPDDebate') }}",
            data: { 'objectId': $(this).attr('objectId'), 'type': $(this).attr('type') },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:Navigation:ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('#ajaxLoader').hide();
                    $('#boxErrorLogin').html(data['error']);
                    $('#boxErrorLogin').show();
                } else {
                    // TODO MAJ libellé / classe
                }
            }
        });

    });


</script>
