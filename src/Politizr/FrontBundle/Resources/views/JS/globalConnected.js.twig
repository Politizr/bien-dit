<script>
    /* hide / show menu preferences */
    $("body").on("click", "[action='openMenuPreferences']", function() {
        $('#menuPreferences').show();
        $(this).hide();
        $('#hideMenuPreferences').show();
    });
    
    $("body").on("click", "[action='hideMenuPreferences']", function() {
        $('#menuPreferences').hide();
        $(this).hide();
        $('#openMenuPreferences').show();
    });  

    /* open suggestion */
    $("body").on("click", "[action='linkSuggestions']", function() {
        console.log('*** linkSuggestions');
        $('#suggestions').fadeIn('fast');
        $('body').addClass('noscroll');
        $('html, body').animate({
            scrollTop: $("body").offset().top
        }, 0);
        $(".modalRightCol").addClass('activeMobileModal'); /* for mobile purpose */
        loadPaginatedList('_suggestions.html.twig');
    });

    // @todo rendre générique le chargement des contenu de modal de liste
    // Liste paginée des suggestions de débat
    function loadPaginatedList(twigTemplate) {
        console.log('*** loadPaginatedList');
        console.log(twigTemplate);

        if (typeof twigTemplate === "undefined") {
            return false;
        }

        $.ajax({
            type: 'POST',
            url: "{{ path('ModalPaginatedList') }}",
            data: { 'twigTemplate': twigTemplate },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:JS:ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('#infoBoxHolder.boxError.notifBoxText').html(data['error']);
                    $('#infoBoxHolder.boxError').show();
                } else {
                    $('#modalBoxContent').html(data['html']);
                    $('#modalBox').fadeIn('fast');
                    $('body').addClass('noscroll');
                    $('html, body').animate({
                        scrollTop: $("body").offset().top
                    }, 0);
                    $(".modalRightCol").addClass('activeMobileModal'); /* for mobile purpose */
                }
                $('#ajaxGlobalLoader').hide();
            }
        });
    }


</script>
