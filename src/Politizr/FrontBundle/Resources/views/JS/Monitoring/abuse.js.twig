<script>
    // clic post abuse
    $("body").on("click", "[action='createAbuseReporting']", function(e) {
        console.log('*** click createAbuseReporting');

        {# @todo return type = url #}
        var xhrPath = "{% include 'PolitizrFrontBundle:Navigation\\Xhr:_xhrPath.html.twig' with {
            'xhrRoute': 'ROUTE_MONITORING_ABUSE_CHECK',
            'xhrService': 'monitoring',
            'xhrMethod': 'abuseCreate',
            'xhrType': 'RETURN_BOOLEAN',
            } only %}";

        $.ajax({
            type: 'POST',
            url: xhrPath,
            data: $("#formAbuseReporting").serialize(),
            dataType: 'json',
            {% include 'PolitizrFrontBundle:JS:_ajaxError.js.twig' %}
            success: function(data) {
                $('#ajaxGlobalLoader').hide();
                if (data['error']) {
                    $('#infoBoxHolder .boxError .notifBoxText').html(data['error']);
                    $('#infoBoxHolder .boxError').show();
                } else {
                    $("[action='modalClose']").trigger("click");

                    $('#infoBoxHolder .boxSuccess .notifBoxText').html('Merci, nos équipes vont étudier votre signalement rapidement.');
                    $('#infoBoxHolder .boxSuccess').show();
                }
            }
        });
    });
</script>
