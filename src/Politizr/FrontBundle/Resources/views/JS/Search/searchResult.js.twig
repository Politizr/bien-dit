<script>
    // search result pagination
    $("body").on("click", "[action='paginateNext']", function(e) {
        console.log('*** click paginateNext');
        console.log('page = ' + $(this).attr('page'));

        e.preventDefault();

        {% include 'PolitizrFrontBundle:JS:_xhrPath.js.twig' with {
            'xhrRoute': 'ROUTE_SEARCH',
            'xhrService': 'search',
            'xhrMethod': 'search',
            'xhrType': 'RETURN_HTML',
            } only %}

        $.ajax({
              type: 'POST',
              url: xhrPath,
              data: { 'query': $(this).attr('query'), 'page': $(this).attr('page') },
              dataType: 'json',
            {% include 'PolitizrFrontBundle:JS:_ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('#ajaxGlobalLoader').hide();
                    $('#infoBoxHolder .boxError .notifBoxText').html(data['error']);
                    $('#infoBoxHolder .boxError').show();
                } else {
                    $('#scroll-nav').remove();
                    $('.boxResults').last().after(data['html']);
                    $('#ajaxGlobalLoader').hide();
                }
            }
        });
    });
</script>
