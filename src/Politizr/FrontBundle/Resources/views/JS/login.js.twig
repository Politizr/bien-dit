<script type="text/javascript">
	// **************************** //
	//      Initialisation
	// **************************** //
	$(document).ready(function () {
	});

	// **************************** //
	//      ACTIONS SIMPLES
	// **************************** //
	$("body").on("click", "#connectMe", function() {
		if ($("#connexionBox").is(":visible")) {
			$("#connexionBox").slideUp("slow");
		} else {
	        $("#connexionBox").slideDown("slow");
	        $('#boxLogin').show();
	        $('#boxLostPassword').hide();
	    }
    });

	$("body").on("click", "#login_actions_lost_password", function() {
		$('#boxLostPassword').show();
		$('#boxLogin').hide();
    });

	$("body").on("click", "#lostPassword_actions_connect", function() {
		$('#boxLostPassword').hide();
		$('#boxLogin').show();
    });

	// **************************** //
	//      POST
	// **************************** //
	// clic connexion
	$("body").on("click", "#login_actions_save", function() {
		$.ajax({
		  	type: 'POST',
		  	url: "{{ path('LoginCheck') }}",
		  	data: $("#formLogin").serialize(),
		  	dataType: 'json',
		  	{% include 'PolitizrFrontBundle:Navigation:ajaxError.js.twig' %}
		  	success: function(data) {
		    	if (data['error']) {
		    	  	$('#ajaxLoader').hide();
		    	  	$('.alert.alert-danger').html(data['error']);
		    		$('.alert.alert-danger').show();
		    	} else {
		    	  	// redirection
		    	  	window.location = data['redirectUrl'];
		    	}
		    }
		});
	});

	// clic mot de passe oublié
	$("body").on("click", "#lostPassword_actions_save", function() {
		$.ajax({
		  	type: 'POST',
		  	url: "{{ path('LostPasswordCheck') }}",
		  	data: $("#formLostPassword").serialize(),
		  	dataType: 'json',
		  	{% include 'PolitizrFrontBundle:Navigation:ajaxError.js.twig' %}
		  	success: function(data) {
		    	if (data['error']) {
		    	  	$('#ajaxLoader').hide();
		    	  	$('.alert.alert-danger').html(data['error']);
		    		$('.alert.alert-danger').show();
		    	} else {
		    	  	$('#ajaxLoader').hide();

		    	  	// fermeture overlay & notif
		    	  	$("#connexionBox").hide();

		    	  	$(".alert.alert-success").html('Un nouveau mot de passe vient de vous être envoyé par email.');
		    	  	$(".alert.alert-success").show();
		    	}
		    }
		});
	});


</script>
