<script type="text/javascript">
	// **************************** //
	//      Initialisation
	// **************************** //
	$(document).ready(function () {
	});

	// **************************** //
	//      ACTIONS SIMPLES
	// **************************** //
	$("body").on("click", ".connectMe", function() {
        $("#connexionBox").show();
        $('#boxLogin').show();
        $('#boxLostPassword').hide();
    });

	$("body").on("click", "#closeConnectMe", function() {
        $("#connexionBox").hide();
    });

	$("body").on("click", "#showLostPasswordBox", function() {
		$('#boxLostPassword').show();
		$('#boxLogin').hide();
    });

	$("body").on("click", "#showLoginBox", function() {
		$('#boxLostPassword').hide();
		$('#boxLogin').show();
    });

	// **************************** //
	//      POST
	// **************************** //
	// clic connexion
	$("body").on("click", "#submitLogin", function() {
		$.ajax({
		  	type: 'POST',
		  	url: "{{ path('LoginCheck') }}",
		  	data: $("#formLogin").serialize(),
		  	dataType: 'json',
		  	{% include 'PolitizrFrontBundle:Navigation:ajaxError.js.twig' %}
		  	success: function(data) {
		    	if (data['error']) {
		    	  	$('#ajaxLoader').hide();
		    	  	$('#boxErrorLogin').html(data['error']);
		    		$('#boxErrorLogin').show();
		    	} else {
		    	  	// redirection
		    	  	window.location = "{{ path('Homepage') }}";
		    	}
		    }
		});
	});

	// clic mot de passe oublié
	$("body").on("click", "#submitLostPassword", function() {
		$.ajax({
		  	type: 'POST',
		  	url: "{{ path('LostPasswordCheck') }}",
		  	data: $("#formLostPassword").serialize(),
		  	dataType: 'json',
		  	{% include 'PolitizrFrontBundle:Navigation:ajaxError.js.twig' %}
		  	success: function(data) {
		    	if (data['error']) {
		    	  	$('#ajaxLoader').hide();
		    	  	$('#boxErrorLost').html(data['error']);
		    		$('#boxErrorLost').show();
		    	} else {
		    	  	$('#ajaxLoader').hide();

		    	  	// fermeture overlay & notif
		    	  	$("#connexionBox").hide();

		    	  	$("#notifContent").html('Un nouveau mot de passe vient de vous être envoyé par email.');
		    	  	$("#notif").show();
		    	}
		    }
		});
	});


</script>
