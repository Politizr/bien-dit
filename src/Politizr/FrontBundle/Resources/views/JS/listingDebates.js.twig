<script>
    // **************************** //
    //      Initialisation
    // **************************** //
    $(document).ready(function () {
        debateList();
    });

    $("body").on("click", "a[action='most-followed']", function(e) {
        console.log('*** click most-followed');
        e.preventDefault();
        $(this).tab('show');

        debateList($(this).attr('order'));
    });
    $("body").on("click", "a[action='best-note']", function(e) {
        console.log('*** click best-note');
        e.preventDefault();
        $(this).tab('show');

        debateList($(this).attr('order'));
    });
    $("body").on("click", "a[action='last']", function(e) {
        console.log('*** click last');
        e.preventDefault();
        $(this).tab('show');

        debateList($(this).attr('order'));
    });

    // Chargement ajax du listing
    function debateList (order) {
        order = (typeof order === "undefined") ? 'most-followed' : order;
        $.ajax({
            type: 'POST',
            url: "{{ path(RouteName) }}",
            data: { 'order': order },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:JS:ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('.alert-danger-msg').html(data['error']);
                    $('.alert.alert-danger').show();
                } else {
                    $('#debate-tab-content').html(data['html']);          
                }
                $('#ajax-loader').hide();
            }
        });    
    }

</script>
