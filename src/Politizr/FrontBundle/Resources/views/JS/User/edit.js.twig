<script>
    // global variables
    var bioEditor = new MediumEditor('.bio-editable', {
        // buttonLabels: 'fontawesome'
        anchorButtonClass: 'mdm-btn',
        placeholder: 'Saisissez ici votre biographie.',
    });


    // Suppression style Bootstrap sur input
    $(function () {
        $("body").find("input.form-control").attr("class", "none");
    });

    // Update user
    $("body").on("click", "[action='user-save']", function(e, mode) {
        console.log('*** click save');
        console.log(mode);

        var bio = bioEditor.serialize();

        console.log(bio['element-0']['value']);

        $('#user_biography').val(bio['element-0']['value']);
     
        if (mode === 'silence') {
            // sauvegarde silencieuse
            $.ajax({type: 'POST', url : "{{ path('UserProfileUpdate') }}", data: $("#form-user-update").serialize() });
        } else {
            $.ajax({
                type: 'POST',
                dataType: 'json',
                url : "{{ path('UserProfileUpdate') }}",
                data: $("#form-user-update").serialize(),
                {% include 'PolitizrFrontBundle:JS:_ajaxError.js.twig' %}
                success: function(data) {
                    $('#ajaxGlobalLoader').hide();
                    if (data['error']) {
                        $('#infoBoxHolder .boxError .notifBoxText').html(data['error']);
                        $('#infoBoxHolder .boxError').show();
                    } else {
                        $('#infoBoxHolder .boxSuccess .notifBoxText').html('Objet bien enregistr√©!');
                        $('#infoBoxHolder .boxSuccess').show();
                    }
                }
            });
        }

        return false;
    });

</script>
