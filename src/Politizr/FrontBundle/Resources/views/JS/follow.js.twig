<script>
    // **************************** //
    //      AJAX
    // **************************** //

    // Suivre
    // 'a[data-spinner="true"]'
    $("body").on("click", "a[action='follow']", function(e) {
        console.log('*** click follow');
        
        e.preventDefault();

        $.ajax({
            type: 'POST',
            url: "{{ path('Follow') }}",
            context: $(this).closest('.star'),
            data: { 'objectId': $(this).attr('objectId'), 'objectType': $(this).attr('objectType') },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:Navigation:ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('#ajaxLoader').hide();
                    $('.alert.alert-danger').html(data['error']);
                    $('.alert.alert-danger').show();
                } else {
                    $(this).html(data['html']);
                }
            }
        });

    });

    // Ne plus suivre
    $("body").on("click", "a[action='unfollow']", function(e) {
        console.log('*** click unfollow');
        
        e.preventDefault();

        $.ajax({
            type: 'POST',
            url: "{{ path('Unfollow') }}",
            context: $(this).closest('.star'),
            data: { 'objectId': $(this).attr('objectId'), 'objectType': $(this).attr('objectType') },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:Navigation:ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('#ajaxLoader').hide();
                    $('.alert.alert-danger').html(data['error']);
                    $('.alert.alert-danger').show();
                } else {
                    $(this).html(data['html']);
                }
            }
        });

    });


</script>
