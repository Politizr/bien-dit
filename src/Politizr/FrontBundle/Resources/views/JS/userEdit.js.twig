<script>
    // **************************** //
    //      Initialisation editeur
    // **************************** //
    var bioEditor = new MediumEditor('.bio-editable', {
        // buttonLabels: 'fontawesome'
        anchorButtonClass: 'mdm-btn',
        placeholder: 'Saisissez ici votre biographie.',
    });


    // **************************** //
    //      Suppression style Bootstrap sur input
    // **************************** //
    $(function () {
        $("body").find("input.form-control").attr("class", "none");
    });

    // **************************** //
    //      POST
    // **************************** //
    // Update user
    $("body").on("click", "a[action='user-save']", function(e, mode) {
        console.log('*** click save');
        console.log(mode);

        var bio = bioEditor.serialize();

        console.log(bio['element-0']['value']);

        $('#user_biography').val(bio['element-0']['value']);
     
        if (mode === 'silence') {
            // sauvegarde silencieuse
            $.ajax({type: 'POST', url : "{{ path('UserProfileUpdate') }}", data: $("#form-user-update").serialize() });
        } else {
            $.ajax({
                type: 'POST',
                dataType: 'json',
                url : "{{ path('UserProfileUpdate') }}",
                data: $("#form-user-update").serialize(),
                {% include 'PolitizrFrontBundle:JS:ajaxError.js.twig' %}
                success: function(data) {
                    $('#ajax-loader').hide();
                    if (data['error']) {
                        $('.alert-danger-msg').html(data['error']);
                        $('.alert.alert-danger').show();
                    } else {
                        $('.alert-success-msg').html('Objet bien enregistr√©!');
                        $('.alert.alert-success').show();
                    }
                }
            });
        }

        return false;
    });

</script>
