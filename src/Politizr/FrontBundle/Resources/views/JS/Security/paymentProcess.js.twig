<script>
    // on document ready
    $(function() {
        $(".payment-detail").hide();
    });

    // payment choice
    $("body").on("click", "[action='payment-choice']", function() {
        console.log('*** click radio-choice');

        $(".payment-detail").hide();
        $(this).siblings(".payment-detail").show();
    });

    // payment process
    $("body").on("click", "[action='payment-process']", function(e) {
        console.log('*** payment-process');

        var xhrPath = "{% include 'PolitizrFrontBundle:Navigation\\Xhr:_xhrPath.html.twig' with {
            'xhrRoute': 'ROUTE_SECURITY_PAYMENT_PROCESS',
            'xhrService': 'security',
            'xhrMethod': 'paymentProcess',
            'xhrType': 'RETURN_HTML',
            } only %}";

        $.ajax({
            type: 'POST',
            url: xhrPath,
            context: this,
            data: { 'pOPaymentTypeId': $(this).attr('pOPaymentTypeId') },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:JS:_ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('#ajaxGlobalLoader').hide();
                    $('#infoBoxHolder .boxError .notifBoxText').html(data['error']);
                    $('#infoBoxHolder .boxError').show();
                } else {
                    if (data['redirect']) {
                        window.location = data['redirectUrl'];
                    } else {
                        $('#ajaxGlobalLoader').hide();
                        $(this).parent().html(data['htmlForm']);
                    }
                }
            }
        });
    });

</script>
