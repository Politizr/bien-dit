<script>
    // notation
    $("body").on("click", "[action='note']", function(e) {
        console.log('*** click note');
        
        e.preventDefault();

        {% include 'PolitizrFrontBundle:JS:_xhrPath.js.twig' with {
            'xhrRoute': 'ROUTE_NOTE',
            'xhrService': 'document',
            'xhrMethod': 'note',
            'xhrType': 'RETURN_HTML',
            } only %}

        $.ajax({
            type: 'POST',
            url: xhrPath,
            context: $(this).closest('.notes'),
            data: { 'subjectId': $(this).attr('subjectId'), 'type': $(this).attr('type'), 'way': $(this).attr('way') },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:JS:_ajaxError.js.twig' %}
            success: function(data) {
                $('#ajaxGlobalLoader').hide();
                if (data['error']) {
                    $('#infoBoxHolder .boxError .notifBoxText').html(data['error']);
                    $('#infoBoxHolder .boxError').show();
                } else {
                    $(this).html(data['html']);
                }
            }
        });

    });


</script>
