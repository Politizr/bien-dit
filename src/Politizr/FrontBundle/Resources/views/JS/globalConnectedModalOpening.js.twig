<script>
    /* open suggestion débats */
    $("body").on("click", "[action='linkSuggestionsDebate']", function() {
        console.log('*** linkSuggestions');
        $('#modalBoxContent').removeClass().addClass('suggestions');
        modalLoading();
        loadPaginatedList('_suggestionsDebate.html.twig');
    });

    /* open suggestion de users */
    $("body").on("click", "[action='linkSuggestionsUser']", function() {
        console.log('*** linkSuggestions');
        $('#modalBoxContent').removeClass().addClass('suggestions');
        modalLoading();
        loadPaginatedList('_suggestionsUser.html.twig');
    });

    /* code générique de chargement d'une modal */4
    function modalLoading() {
        $('#modalBox').fadeIn('fast');
        $('body').addClass('noscroll');
        $('html, body').animate({
            scrollTop: $("body").offset().top
        }, 0);
        $(".modalRightCol").addClass('activeMobileModal'); /* for mobile purpose */
    };

    // @todo rendre générique le chargement des contenu de modal de liste
    // Liste paginée des suggestions de débat
    function loadPaginatedList(twigTemplate) {
        console.log('*** loadPaginatedList');
        console.log(twigTemplate);

        if (typeof twigTemplate === "undefined") {
            return false;
        }

        $.ajax({
            type: 'POST',
            url: "{{ path('ModalPaginatedList') }}",
            data: { 'twigTemplate': twigTemplate },
            dataType: 'json',
            {% include 'PolitizrFrontBundle:JS:ajaxError.js.twig' %}
            success: function(data) {
                if (data['error']) {
                    $('#infoBoxHolder.boxError.notifBoxText').html(data['error']);
                    $('#infoBoxHolder.boxError').show();
                } else {
                    $('#modalBoxContent').html(data['html']);
                    listing();
                    // @todo imgLiquid
                    // @todo refactoring > function modalLoadingOnSuccess()
                }
                $('#ajaxGlobalLoader').hide();
            }
        });
    }

</script>

