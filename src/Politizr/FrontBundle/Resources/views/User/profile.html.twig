{% extends 'PolitizrFrontBundle::layoutConnected.html.twig' %}

{% block title %}
    {{ parent() }} - Mon profil
{% endblock title %}

{% block fixedActions %}
    <div id="fixedActions">
        <div class="editProfile">
            <div class="ajaxLoader" style="display: none;">
                <div class="ajaxLoaderSpinner"></div><div class="ajaxLoaderBg"></div><div class="ajaxLoaderBlockClick"></div>
            </div>
            <a href="{{ path('EditProfile'~profileSuffix) }}">                  
                <i class="iconEdit"></i>
                éditer
            </a>
        </div>
    </div>
{% endblock fixedActions %}

{% block main %}
    <div id="main">
        <div id="profileHeader">
            <div class="pad40">
                <div id="profileSummaryHeader">
                    <div id="profileReputationCounter" action="modalReputation">
                        <i class="iconCup"></i>
                        {{ user.reputationScore }} points de réputation
                    </div>
                    {% if user.qualified %}
                        <i class="iconInfo" action="confidentialToggle"></i>
                        <div class="confidentialInfo" style="display: none;">Cette information est privée</div>
                    {% endif %}
                    <div id="profileFollowersCounter" action="modalFollowers" model="PUser" slug="{{ user.slug }}">
                        {{ user.countFollowers }} abonnés
                    </div>
                </div>
                <div id="profileSummaryFooter">
                    <div class="avatar60">
                        {{ user | photo('user_60') }}
                    </div>
                    <div id="profileNameHolder">
                        <div id="profileNameBottom">
                            <div id="profileName">
                                {{ user }}
                                {% include 'PolitizrFrontBundle:User:_authorOrganization.html.twig' with { 'user': user } only %}
                            </div>
                            <div id="profileSocialLinks">
                                {% if user.facebook is not empty %}
                                    <a href="{{ user.facebook }}" target="_blank"><i class="iconSocialFb"></i></a>
                                {% endif %}
                                {% if user.twitter is not empty %}
                                    <a href="{{ user.twitter }}" target="_blank"><i class="iconSocialTw"></i></a>
                                {% endif %}
                                {% if user.website is not empty %}
                                    <a href="{{ user.website }}" target="_blank"><i class="iconLink"></i></a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div id="profileSubtitle">{{ user.subtitle | raw }}</div>
                </div>
            </div>                      
            <div id="profileHeaderIllustration">
                {{ user | photoBack('user_bio_back') }}
            </div>             
        </div>
        <div id="illustration_l">
            {{ user | photoBack('user_bio_back') }}
        </div>
        <div id="illustration_r">
            {{ user | photoBack('user_bio_back') }}
        </div>

        {% include 'PolitizrFrontBundle:Document:_copyright.html.twig' with { 'copyright': user.copyright } %}
        
        <div id="profilePublicTagList">
            {{ user | userTags }}
        </div>

        <div id="profilePrivateTagList">
            <div id="privateTagTitle">
                <span>mes thématiques privées</span>
                <i class="iconInfo" action="confidentialToggle"></i>
                <div class="confidentialInfo" style="display: none;">Cette information est privée</div>
            </div>
            {{ user | followTags }}
        </div>

        <div id="profileBio">
            <div id="showCompleteBio"><span action="showCompleteBio">afficher la suite</span></div>
            {{ user.biography | raw }}
            <div id="hideCompleteBio"><span action="hideCompleteBio">masquer</span></div>
        </div>
        
        {% if user.isQualified %}
            <div id="profileMandate">
                <span>mandats</span>
                {% include 'PolitizrFrontBundle:User:_mandates.html.twig' with { 'mandates': user.mandates } only %}
            </div>
        {% endif %}
{% endblock main %}

{% block javascriptFooter %}
    {{ parent() }}

    {% javascripts
        '@PolitizrFrontBundle/Resources/public/js/politizr/user/detail.js'
        filter='uglifyjs2' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

{% endblock javascriptFooter %}
