{% extends 'PolitizrFrontBundle::layoutConnected.html.twig' %}

{% block main %}
    <div id="prefs" class="connexionPrefs">
        <h1>Mes informations personnelles</h1>

        {% if isGrantedE() %} 
            <h2>Vous disposez actuellement d'un compte débatteur.</h2>
        {% else %}
            <h2>Vous disposez actuellement d'un compte citoyen.</h2>
        {% endif %}

        <div id="boxPerso1">
            <h3>Votre identité</h3>
            {% if app.user.validated %}
                <p class="formInfo">
                    <i class="iconAlert"></i>Ces informations ont été validées par nos services et ne peuvent être modifiées: si vous désirez les corriger, contactez directement Politizr.
                </p>
            {% endif %}

            <form name="user" method="post" id="formPerso1">
                {{ form_errors(formPerso1) }}

                <!-- @todo HTML/CSS <div class="formGroup"> => <div class="form-group"> (sf2 generation) -->
                {{ form_row(formPerso1.gender) }}
                {{ form_row(formPerso1.name) }}
                {{ form_row(formPerso1.firstname) }}
                {{ form_row(formPerso1.birthday) }}

                {{ form_rest(formPerso1) }}
    
                {% if not app.user.validated %}
                    <button type="button" action="submitPerso">
                        <i class="iconCheck"></i>Mettre à jour
                    </button>
                {% endif %}
            </form>
        </div>

        <div id="boxPerso2">
            <h3>Votre email et votre abonnement newsletter</h3>
            <form name="user" method="post" id="formPerso2">
                {{ form_errors(formPerso2) }}

                {{ form_row(formPerso2.email) }}
                {{ form_row(formPerso2.newsletter) }}

                {{ form_rest(formPerso2) }}

                <button type="button" action="submitPerso">
                    <i class="iconCheck"></i>Mettre à jour
                </button>
            </form>
        </div>
        
        <div id="boxPerso3">
            <h3>Vos identifiant et mot de passe de connexion</h3>
            <p class="formInfo"><i class="iconAlert"></i>Identifiants et mot de passe pour une connexion hors OpenID (Facebook, Twitter, Google).</p>
            <form name="user" method="post" id="formPerso3">
                {{ form_errors(formPerso3) }}

                {{ form_row(formPerso3.username) }}
                {{ form_row(formPerso3.password) }}

                {{ form_rest(formPerso3) }}
           
                <button type="button" action="submitPerso">
                    <i class="iconCheck"></i>Mettre à jour
                </button>
            </form>
        </div>
    </div>
{% endblock main %}

{% block javascriptFooter %}
    {{ parent() }}

    {% include 'PolitizrFrontBundle:JS\\User:editPerso.js.twig' %}
{% endblock javascriptFooter %}
