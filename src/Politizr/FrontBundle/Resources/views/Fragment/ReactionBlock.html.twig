<div class="reaction-header">
	<div class="row">
		<div class="col-sm-6">
			{% if not full %}
				<h3><a class="bg-warning" href="{{ path('ReactionDetail', { 'id': reaction.id, 'slug': reaction.slug }) }}">{{ reaction.title | slice(0, 100) }}</a></h3>
			{% else %}
				<h3>{{ reaction.title }}</h3>
			{% endif %}
		</div>
		<div class="notes col-sm-2 text-center">
			{{ linkNote(reaction, constant('Politizr\\Model\\PDocument::TYPE_REACTION')) }}
		</div>
		<div class="col-sm-2 text-center">
			<span class="label label-info text-center">vu {{ reaction.nbViews }} fois</span>
		</div>
		<div class="col-sm-2 text-center">
			<span class="label label-default pull-right">publié le {{ reaction.publishedAt | localizeddate('medium', 'short', app.request.locale, "Europe/Paris", "EEEE d MMMM HH'h'mm" ) | capitalize }}</span>
		</div>
	</div>

	{#
	<div>
		<hr>
		DEBUG NESTED SET - 
		isRoot {{ reaction.isRoot }} - 
		isLeaf {{ reaction.isLeaf }} - 
		getLevel {{ reaction.getLevel }} - 
		hasChildren {{ reaction.hasChildren }} - 
		countChildren {{ reaction.countChildren }} - 
		hasPrevSibling {{ reaction.hasPrevSibling }} - 
		hasNextSibling {{ reaction.hasNextSibling }} - 
	</div>
	#}

	{% if reaction.level > 1 %}
		{% set parentReaction = reaction.getParent %}
		<h4 class="label label-warning">En réaction à "<a href="{{ path('ReactionDetail', { 'id': parentReaction.id, 'slug': parentReaction.slug }) }}">{{ parentReaction.title }}</a>"</h4>
	{% endif %}

	<div class="row" action="user-more-info">
		<div class="author-mini-block col-sm-12">
			{% include 'PolitizrFrontBundle:Fragment:UserMiniBlock.html.twig' with {'user': reaction.pUser } only %}
		</div>
	</div>
</div>
<hr>
<div class="reaction-summary jumbotron">
	<div class="reaction-summary">
		{{ reaction.getSummary | raw }}
	</div>
</div>
{% if full %}
	<hr>
	<div class="reaction-body">
		{% for paragraph in paragraphs %}
			<div class="reaction-paragraph">
				<div class="row reaction-description sizeup">
					<div class="col-sm-1">
						<a class="badge alert-warning" action="comments" object-id="{{ reaction.id }}" no-paragraph="{{ loop.index }}">{{ reaction.document.countComments(true, loop.index) }}</a>
					</div>
					<div class="col-sm-11">
						<p>{{ paragraph | raw }}</p>
					</div>
				</div>
				<div class="comments"></div>
			</div>
		{% endfor %}
	</div>
	<hr>
	<div class="reaction-more-info well">
		{{ reaction.getMoreInfo | raw }}
	</div>
{% endif %}
<hr>