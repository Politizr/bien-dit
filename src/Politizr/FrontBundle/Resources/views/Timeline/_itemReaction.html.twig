<div class="timelineItem">
    <div class="timelineItemHeader">
        {% include 'PolitizrFrontBundle:DateTime:_timeAt.html.twig' with { 'dateTimeAt': reaction.publishedAt } only %}
    </div>

    {% spaceless %}
        <div class="timelineItemHolder">

            <div class="timelineItemContext">
                {% if parentReaction is not null %}
                    <span class="timelineItemContextHighlight">
                        À propos de la réaction de 
                        {% include 'PolitizrFrontBundle:User:_authorName.html.twig' with { 'user': parentReaction.user } only %}
                        {% include 'PolitizrFrontBundle:User:_authorOrganization.html.twig' with { 'user': parentReaction.user } only %}:&nbsp;
                    </span>
                    <a href="{{ path('ReactionDetail', { 'slug': parentReaction.slug }) }}">{{ parentReaction.title }}</a>
                    <br/>
                {% endif %}

                {% if not debateContext %}
                    <span class="timelineItemContextHighlight">
                        Au sujet du <span{% if debateIsFollowed %} class="followedDebate"{% endif %}>débat</span>:&nbsp;
                    </span>
                    <a href="{{ path('DebateDetail', { 'slug': reaction.debate.slug }) }}">{{ parentDebate.title }}</a>
                {% endif %}
            </div>
            
            <div class="timelineItemContent timelineItemOfficial">
                <div class="timelineItemObject">
                    <i class="iconNotifNo"></i>
                    {% if authorIsMe %}
                        Vous avez rédigé une réaction:&nbsp;
                    {% else %}
                        {% include 'PolitizrFrontBundle:User:_authorName.html.twig' with { 'user': reaction.user, 'isFollowed': authorIsFollowed } only %}
                        {% include 'PolitizrFrontBundle:User:_authorOrganization.html.twig' with { 'user': reaction.user } only %} a rédigé une réaction:&nbsp;
                    {% endif %}
                </div>
                <div class="timelineItemHighlight">
                    <div class="timelineItemIllustration">
                        {{ reaction | image('debate_timeline', false) }}
                    </div>
                    <div class="avatar40">
                        {{ reaction.user | photo('user_40') }}
                    </div>
                    <a href="{{ path('ReactionDetail', { 'slug': reaction.slug }) }}">
                        <span>{{ reaction.title }}</span>
                        {# @todo description excerpt #}
                        {# reaction.summary | raw #}
                    </a>
                </div>
                <div class="timelineItemContentFooter">
                    <div class="timelineItemContentFooterLeft">
                        <div class="reactionsCounter">
                            <i class="iconReaction"></i>
                            {{ reaction | nbReactions }}
                        </div>
                        <div class="commentsCounter" action="paragraphCommentsCounter">
                            <i class="iconComment"></i>
                            {{ reaction | nbComments }}
                        </div>
                        <div class="readingTime">
                            {# @todo temps de lecture #}
                            <i class="iconTime"></i>
                            X minutes
                        </div>
                    </div>
                    <div class="postNote">
                        <div class="notePlus">
                            {{ reaction.notePos }}<i class="iconNotePlus"></i>
                        </div>
                        <div class="noteMinus">
                            <i class="iconNoteMinus"></i>{{ reaction.noteNeg }}
                        </div>
                    </div>  
                </div>
            </div>
        </div>

    {% endspaceless %}
    <div class="timelineItemFooter">
        <a href="{{ path('ReactionDetail', { 'slug': reaction.slug }) }}" class="modalItemShow"><i class="iconGoTo"></i>Afficher</a>
    </div>
</div>
