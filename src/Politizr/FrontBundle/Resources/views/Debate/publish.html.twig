{# beta #}
{% extends 'PolitizrFrontBundle::layoutConnected.html.twig' %}

{% block title %}Publier un sujet de discussion - {{ parent() }}{% endblock title %}

{% block bodyClass %} class="user edition"{% endblock bodyClass %}

{% block content %}
    <div id="content">
        <h5>Zonage de publication</h5>
        <div class="notice">
            <i class="icon-info"></i><b>Choisissez la zone géographique associée à votre publication.</b>
        </div>
        <form id="geoForm">
            {{ form_errors(formLocalization) }}

            {% for geo in formLocalization.geo %}
                {{ form_row(geo) }}
                {% if loop.index == 1 %}
                    {{ form_widget(formLocalization.localization_city) }}<br/>
                {% elseif loop.index == 2 %}
                    {{ form_widget(formLocalization.localization_department) }}<br/>
                {% elseif loop.index == 3 %}
                    {{ form_widget(formLocalization.localization_region) }}<br/>
                {% endif %}
            {% endfor %}

            {{ form_rest(formLocalization) }}
        </form>

        <h5>Type de publication</h5>
        <div class="notice">
            <i class="icon-info"></i><b>Cochez le(s) type(s) associé(s) à votre publication.</b>
        </div>
        {{ debate | editTypeForm }}

        <h5>Thématiques abordées</h5>
        <div class="notice">
            <i class="icon-info"></i><b>5 thématiques maximum.</b><br>
        </div>
        {# include('includes/helperEditTag.php') #}

        {{ debateTagsEdit(debate, constant('Politizr\\Constant\\TagConstants::TAG_TYPE_THEME'), 1, true) }}
    </div>
{% endblock content %}

{% block sidebarContent %}
    {% include 'PolitizrFrontBundle:Debate:_sidebarPublish.html.twig' %}
{% endblock sidebarContent %}

{% block javascriptFooter %}
    {{ parent() }}

    {% javascripts
        '@PolitizrFrontBundle/Resources/public/js/smoke.min.js'
        '@PolitizrFrontBundle/Resources/public/js/politizr/document/publish.js'
        '@PolitizrFrontBundle/Resources/public/js/politizr/tag/editTags.js'
        '@PolitizrFrontBundle/Resources/public/js/politizr/pages/publishDebate.js'
        filter='uglifyjs2' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock javascriptFooter %}
