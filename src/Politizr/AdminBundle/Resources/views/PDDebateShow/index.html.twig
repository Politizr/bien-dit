{% extends_admingenerated "PolitizrAdminBundle:PDDebateShow:index.html.twig" %}

{# Image upload #}
{% block show_column_block_file_name %}
    {% include 'PolitizrAdminBundle:Fragment:_uploadImage.html.twig' with {'zone': 1, 'fileName': PDDebate.fileName,'subjectId': PDDebate.id, 'queryClass': 'Politizr\\Model\\PDDebateQuery', 'setter': 'setFileName', 'uploadWebPath': constant('Politizr\\Constant\\PathConstants::DEBATE_UPLOAD_WEB_PATH')} %}
{% endblock %}

{% block show_column_copyright %}
    {{ PDDebate.getCopyright | purify }}
{% endblock %}


{# Objets #}
{% block show_column_block_p_user %}
    {{ adminCreatePath(constant('Politizr\\Constant\\ObjectTypeConstants::TYPE_USER'), PDDebate.PUserId) }}
{% endblock %}

{# Contenus #}
{% block show_column_summary %}
    {{ PDDebate.getSummary | purify }}
{% endblock %}

{% block show_column_description %}
    {{ PDDebate.getDescription | purify }}
{% endblock %}

{# Bloc réactions #}
{% block show_column_block_reactions %}
    {{ adminDebateReactions(PDDebate, 'show') }}
{% endblock show_column_block_reactions %}

{# Bloc commentaires #}
{% block show_column_block_comments %}
    {{ adminDebateComments(PDDebate) }}
{% endblock %}

{# Bloc tags #}
{% block show_column_block_tags %}
    {{ adminDebateTags(PDDebate, null, 1, mode='show') }}
{% endblock %}

{# Bloc loc #}
{% block show_column_block_loc %}
    {{ adminDocumentLoc(PDDebate, constant('Politizr\\Constant\\ObjectTypeConstants::TYPE_DEBATE')) }}
{% endblock %}

{# Bloc followers élus #}
{% block show_column_block_followers_q %}
    {{ adminDebateFollowersQ(PDDebate) }}
{% endblock %}

{# Bloc followers citoyens #}
{% block show_column_block_followers_c %}
    {{ adminDebateFollowersC(PDDebate) }}
{% endblock %}

{# Block moderation new alert #}
{% block show_column_block_moderation_alert_new %}
    {{ adminModerationAlertNew(constant('Politizr\\Constant\\ObjectTypeConstants::TYPE_DEBATE'), PDDebate.Id, PDDebate.PUserId) }}
{% endblock %}

{# Block moderation alert listing #}
{% block show_column_block_moderation_alert_listing %}
    <div id="moderationListing">
        {{ adminModerationAlertListing(PDDebate.PUserId) }}
    </div>
{% endblock %}

{# Block front link #}
{% block show_column_block_front %}
    {% if PDDebate.online and PDDebate.published %}
        <a href="{{ path('DebateDetail', {'slug': PDDebate.slug}) }}" target="_blank">Consulter</a>
    {% else %}
        Hors ligne
    {% endif %}
{% endblock %}


{% block object_actions_script_container %}
    <script>
        var nbZones = 1;
        var service = 'admin';
        var xhrRoute = ADMIN_ROUTE_TAG_LISTING;
    </script>

    <script type="text/javascript" src="{{ asset('bundles/politizrfront/js/politizr/autocomplete-tools') }}"></script>    
    <script type="text/javascript" src="{{ asset('bundles/politizrfront/js/politizr/tag/editTags.js') }}"></script>  

    <script type="text/javascript" src="{{ asset('bundles/politizradmin/js/jquery.form.min.js') }}"></script>  
    <script type="text/javascript" src="{{ asset('bundles/politizradmin/js/politizr/uploadImage.js') }}"></script>  

    <script type="text/javascript" src="{{ asset('bundles/politizradmin/js/politizr/moderation/notification.js') }}"></script>

    {# localization js #}
    <script>
        // User localization vars
        var xhrRouteCity = ADMIN_ROUTE_CITY_LISTING;
    </script>
    <script type="text/javascript" src="{{ asset('bundles/politizrfront/js/politizr/localization/edit.js') }}"></script>  
    <script type="text/javascript" src="{{ asset('bundles/politizradmin/js/politizr/document/localization.js') }}"></script>  
{% endblock object_actions_script_container %}
